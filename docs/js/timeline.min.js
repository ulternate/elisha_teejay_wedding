jQuery(document).ready(function(e){function t(e,t,n){var i=d(e.eventsWrapper),r=Number(e.timelineWrapper.css("width").replace("px",""))
"next"==n?a(e,i-r+x,r-t):a(e,i+r-x)}function n(e,t,n){var i=e.eventsContent.find(".selected")
if(("next"==n?i.next():i.prev()).length>0){var a=e.eventsWrapper.find(".selected"),s="next"==n?a.parent("li").next("li").children("a"):a.parent("li").prev("li").children("a")
l(s,e.fillingLine,t),f(s,e.eventsContent),s.addClass("selected"),a.removeClass("selected"),p(s),r(n,s,e,t)}}function r(e,t,n,i){var r=window.getComputedStyle(t.get(0),null),l=Number(r.getPropertyValue("left").replace("px","")),s=Number(n.timelineWrapper.css("width").replace("px","")),i=Number(n.eventsWrapper.css("width").replace("px","")),o=d(n.eventsWrapper);("next"==e&&l>s-o||"prev"==e&&l<-o)&&a(n,s/2-l,s-i)}function a(e,t,n){var i=e.eventsWrapper.get(0)
t=t>0?0:t,t=void 0!==n&&t<n?n:t,v(i,"translateX",t+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==n?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function l(e,t,n){var i=window.getComputedStyle(e.get(0),null),r=i.getPropertyValue("left"),a=i.getPropertyValue("width")
r=Number(r.replace("px",""))+Number(a.replace("px",""))/2
var l=r/n
v(t.get(0),"scaleX",l)}function s(e,t){for(i=0;i<e.timelineDates.length;i++){var n=(m(e.timelineDates[0],e.timelineDates[i]),i+1)
e.timelineEvents.eq(i).css("left",n*t-16+"px")}}function o(e,t){var n=(m(e.timelineDates[0],e.timelineDates[e.timelineDates.length-1]),e.timelineDates.length+1)
return totalWidth=n*t,e.eventsWrapper.css("width",totalWidth+"px"),l(e.timelineEvents.eq(0),e.fillingLine,totalWidth),r("next",e.eventsWrapper.find("a.selected"),e),totalWidth}function f(e,t){var n=e.data("date"),i=t.find(".selected"),r=t.find('[data-date="'+n+'"]'),a=r.height()
if(r.index()>i.index())var l="selected enter-right",s="leave-left"
else var l="selected enter-left",s="leave-right"
r.attr("class",l),i.attr("class",s).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){i.removeClass("leave-right leave-left"),r.removeClass("enter-left enter-right")}),t.css("height",a+"px")}function p(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function d(e){var t=window.getComputedStyle(e.get(0),null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")
if(n.indexOf("(")>=0){var n=n.split("(")[1]
n=n.split(")")[0],n=n.split(",")
var i=n[4]}else var i=0
return Number(i)}function v(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}function c(t){var n=[]
return t.each(function(){var t=e(this).data("date").split("/"),i=new Date(t[2],t[1]-1,t[0])
n.push(i)}),n}function m(e,t){return Math.round(t-e)}function u(e){var t=[]
for(i=1;i<e.length;i++){var n=m(e[i-1],e[i])
t.push(n)}return Math.min.apply(null,t)}function g(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,r=e.offsetHeight;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft
return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+r>window.pageYOffset&&n+i>window.pageXOffset}function h(){return window.getComputedStyle(document.querySelector(".cd-horizontal-timeline"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}var w=e(".cd-horizontal-timeline"),x=60
w.length>0&&function(i){i.each(function(){var i=e(this),r={}
r.timelineWrapper=i.find(".events-wrapper"),r.eventsWrapper=r.timelineWrapper.children(".events"),r.fillingLine=r.eventsWrapper.children(".filling-line"),r.timelineEvents=r.eventsWrapper.find("a"),r.timelineDates=c(r.timelineEvents),r.eventsMinLapse=u(r.timelineDates),r.timelineNavigation=i.find(".cd-timeline-navigation"),r.eventsContent=i.children(".events-content"),s(r,x)
var a=o(r,x)
i.addClass("loaded"),r.timelineNavigation.on("click",".next",function(e){e.preventDefault(),t(r,a,"next")}),r.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),t(r,a,"prev")}),r.eventsWrapper.on("click","a",function(t){t.preventDefault(),r.timelineEvents.removeClass("selected"),e(this).addClass("selected"),p(e(this)),l(e(this),r.fillingLine,a),f(e(this),r.eventsContent)}),r.eventsContent.on("swipeleft",function(){"mobile"==h()&&n(r,a,"next")}),r.eventsContent.on("swiperight",function(){"mobile"==h()&&n(r,a,"prev")}),e(document).keyup(function(e){"37"==e.which&&g(i.get(0))?n(r,a,"prev"):"39"==e.which&&g(i.get(0))&&n(r,a,"next")})})}(w)})
